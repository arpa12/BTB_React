import React from "react";
import {
    Box,
    Heading,
    Text,
    SimpleGrid,
    FormControl,
    FormLabel,
    Input,
    Select,
    useColorModeValue,
    Container,
} from "@chakra-ui/react";

// ЁЯФБ Section Wrapper for each form section
const Section = ({ title, subtitle, children }) => {
    const borderColor = useColorModeValue("gray.200", "gray.700");
    return (
        <Box
            bg="white"
            p={{ base: 6, md: 8 }}
            borderRadius="lg"
            boxShadow="lg"
            mb={8}
            border="1px solid"
            borderColor={borderColor}
        >
            <Box mb={6}>
                <Heading size="md" mb={1} color="gray.800">
                    {title}
                </Heading>
                {subtitle && (
                    <Text fontSize="sm" color="gray.500">
                        {subtitle}
                    </Text>
                )}
            </Box>
            {children}
        </Box>
    );
};

// ЁЯМЯ Styled Inputs
const ModernInput = (props) => (
    <Input
        variant="filled"
        bg="gray.50"
        _focus={{ bg: "white", borderColor: "blue.300" }}
        _hover={{ bg: "gray.100" }}
        {...props}
    />
);

const ModernSelect = (props) => (
    <Select
        variant="filled"
        bg="gray.50"
        _focus={{ bg: "white", borderColor: "blue.300" }}
        _hover={{ bg: "gray.100" }}
        {...props}
    />
);

// ЁЯУЛ Form Configuration
const formSections = [
    {
        title: "рзз. ржЖржмрзЗржжржиржХрж╛рж░рзАрж░ рждржерзНржп",
        subtitle: "Applicant Information",
        prefix: "applicant",
        fields: [
            { name: "name_bn", label: "ржЖржмрзЗржжржиржХрж╛рж░рзАрж░ ржирж╛ржо - ржмрж╛ржВрж▓рж╛", type: "text", required: true, placeholder: "ржмрж╛ржВрж▓рж╛ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "name_en", label: "Applicant's Name - English", type: "text", required: true, placeholder: "Enter name in English" },
            { name: "father_name", label: "ржкрж┐рждрж╛рж░ ржирж╛ржо", type: "text", placeholder: "ржкрж┐рждрж╛рж░ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "mother_name", label: "ржорж╛рждрж╛рж░ ржирж╛ржо", type: "text", placeholder: "ржорж╛рждрж╛рж░ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "gender", label: "рж▓рж┐ржЩрзНржЧ", type: "select", options: ["ржкрзБрж░рзБрж╖", "ржорж╣рж┐рж▓рж╛", "ржЕржирзНржпрж╛ржирзНржп"] },
            { name: "designation", label: "ржкржжржмрж┐", type: "text", required: true, placeholder: "ржЖржкржирж╛рж░ ржкржжржмрж┐ рж▓рж┐ржЦрзБржи" },
            { name: "mobile", label: "ржорзЛржмрж╛ржЗрж▓ ржиржВ", type: "tel", required: true, placeholder: "рззрзз ржбрж┐ржЬрж┐ржЯ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи" },
            { name: "phone", label: "ржлрзЛржи ржиржорзНржмрж░", type: "text", placeholder: "ржлрзЛржи ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи (ржпржжрж┐ ржерж╛ржХрзЗ)" },
            { name: "email", label: "ржЗржорзЗржЗрж▓", type: "email", required: true, placeholder: "example@email.com" },
        ],
    },
    {
        title: "рзи. ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ рждржерзНржп",
        subtitle: "Organization Information",
        prefix: "organization",
        fields: [
            { name: "org_name_bn", label: "ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржирж╛ржо - ржмрж╛ржВрж▓рж╛", type: "text", placeholder: "ржмрж╛ржВрж▓рж╛ржпрж╝ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "org_name_en", label: "ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржирж╛ржо - ржЗржВрж░рзЗржЬрж┐", type: "text", placeholder: "Enter organization name in English" },
            { name: "tour_operator_type", label: "ржЯрзНржпрзБрж░ ржЕржкрж╛рж░рзЗржЯрж░ ржЯрж╛ржЗржк", type: "select", options: ["ржЗржиржмрж╛ржЙржирзНржб", "ржЖржЙржЯржмрж╛ржЙржирзНржб", "ржЙржнржпрж╝"] },
            { name: "org_type", label: "ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржзрж░ржг", type: "text", placeholder: "ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржзрж░ржг рж▓рж┐ржЦрзБржи" },
            { name: "website", label: "ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ", type: "text", placeholder: "www.example.com" },
            { name: "location", label: "ржЕржмрж╕рзНржерж╛ржи", type: "select", options: ["ржврж╛ржХрж╛", "ржЪржЯрзНржЯржЧрзНрж░рж╛ржо"] },
        ],
    },
    {
        title: "рзй. ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЕржирзБржпрж╛рзЯрзА ржмрзНржпржмрж╕рж╛рж░ ржарж┐ржХрж╛ржирж╛",
        prefix: "business_address",
        fields: [
            { name: "division", label: "ржмрж┐ржнрж╛ржЧ", type: "text", placeholder: "ржмрж┐ржнрж╛ржЧ рж▓рж┐ржЦрзБржи" },
            { name: "district", label: "ржЬрзЗрж▓рж╛", type: "text", placeholder: "ржЬрзЗрж▓рж╛ рж▓рж┐ржЦрзБржи" },
            { name: "upazila", label: "ржЙржкржЬрзЗрж▓рж╛", type: "text", placeholder: "ржЙржкржЬрзЗрж▓рж╛ рж▓рж┐ржЦрзБржи" },
            { name: "post_code", label: "ржкрзЛрж╕рзНржЯ ржХрзЛржб", type: "text", placeholder: "ржкрзЛрж╕рзНржЯ ржХрзЛржб рж▓рж┐ржЦрзБржи" },
            { name: "address_bn", label: "ржарж┐ржХрж╛ржирж╛ (ржмрж╛ржВрж▓рж╛)", type: "text", placeholder: "ржмрж╛ржВрж▓рж╛ржпрж╝ ржарж┐ржХрж╛ржирж╛ рж▓рж┐ржЦрзБржи" },
            { name: "address_en", label: "ржарж┐ржХрж╛ржирж╛ (ржЗржВрж░рзЗржЬрж┐)", type: "text", placeholder: "Address in English" },
            { name: "phone", label: "ржлрзЛржи ржиржорзНржмрж░", type: "text", placeholder: "ржлрзЛржи ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи" },
            { name: "mobile", label: "ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░", type: "text", placeholder: "ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи" },
            { name: "email", label: "ржЗржорзЗржЗрж▓", type: "email", placeholder: "example@email.com" },
        ],
    },
    {
        title: "рзк. ржорж╛рж▓рж┐ржХрзЗрж░ рждржерзНржп",
        subtitle: "Owner Information",
        prefix: "owner",
        fields: [
            { name: "owner_name", label: "ржорж╛рж▓рж┐ржХрзЗрж░ ржирж╛ржо", type: "text", required: true, placeholder: "ржорж╛рж▓рж┐ржХрзЗрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "owner_father_name", label: "ржкрж┐рждрж╛рж░ ржирж╛ржо", type: "text", required: true, placeholder: "ржкрж┐рждрж╛рж░ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "owner_mother_name", label: "ржорж╛рждрж╛рж░ ржирж╛ржо", type: "text", required: true, placeholder: "ржорж╛рждрж╛рж░ ржирж╛ржо рж▓рж┐ржЦрзБржи" },
            { name: "nationality", label: "ржЬрж╛рждрзАрзЯрждрж╛", type: "text", required: true, placeholder: "ржЬрж╛рждрзАрзЯрждрж╛ рж▓рж┐ржЦрзБржи" },
            { name: "nid", label: "ржЬрж╛рждрзАрзЯ ржкрж░рж┐ржЪрзЯржкрждрзНрж░ ржиржВ", type: "text", required: true, placeholder: "ржЬрж╛рждрзАрзЯ ржкрж░рж┐ржЪрзЯржкрждрзНрж░ ржиржВ рж▓рж┐ржЦрзБржи" },
            { name: "dob", label: "ржЬржирзНржорждрж╛рж░рж┐ржЦ", type: "date", required: true },
            { name: "owner_designation", label: "ржкржжржмрж┐", type: "text", required: true, placeholder: "ржкржжржмрж┐ рж▓рж┐ржЦрзБржи" },
            { name: "owner_email", label: "ржЗржорзЗржЗрж▓", type: "email", required: true, placeholder: "example@email.com" },
            { name: "owner_mobile", label: "ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░", type: "tel", required: true, placeholder: "рззрзз ржбрж┐ржЬрж┐ржЯ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи" },
        ],
    },
    {
        title: "рзл. рж╕рзНржерж╛рзЯрзА ржарж┐ржХрж╛ржирж╛",
        subtitle: "Permanent Address",
        prefix: "permanent_address",
        fields: [
            { name: "permanent_division", label: "ржмрж┐ржнрж╛ржЧ", type: "text", required: true, placeholder: "ржмрж┐ржнрж╛ржЧ рж▓рж┐ржЦрзБржи" },
            { name: "permanent_district", label: "ржЬрзЗрж▓рж╛", type: "text", required: true, placeholder: "ржЬрзЗрж▓рж╛ рж▓рж┐ржЦрзБржи" },
            { name: "permanent_upazila", label: "ржЙржкржЬрзЗрж▓рж╛", type: "text", required: true, placeholder: "ржЙржкржЬрзЗрж▓рж╛ рж▓рж┐ржЦрзБржи" },
            { name: "permanent_post_code", label: "ржкрзЛрж╕рзНржЯ ржХрзЛржб", type: "text", required: true, placeholder: "ржкрзЛрж╕рзНржЯ ржХрзЛржб рж▓рж┐ржЦрзБржи" },
            { name: "permanent_address", label: "ржарж┐ржХрж╛ржирж╛", type: "text", required: true, placeholder: "ржарж┐ржХрж╛ржирж╛ рж▓рж┐ржЦрзБржи" },
        ],
    },
    {
        title: "рзм. ржмрж░рзНрждржорж╛ржи ржарж┐ржХрж╛ржирж╛",
        subtitle: "Current Address",
        prefix: "current_address",
        fields: [
            { name: "current_division", label: "ржмрж┐ржнрж╛ржЧ", type: "text", required: true, placeholder: "ржмрж┐ржнрж╛ржЧ рж▓рж┐ржЦрзБржи" },
            { name: "current_district", label: "ржЬрзЗрж▓рж╛", type: "text", required: true, placeholder: "ржЬрзЗрж▓рж╛ рж▓рж┐ржЦрзБржи" },
            { name: "current_upazila", label: "ржЙржкржЬрзЗрж▓рж╛", type: "text", required: true, placeholder: "ржЙржкржЬрзЗрж▓рж╛ рж▓рж┐ржЦрзБржи" },
            { name: "current_post_code", label: "ржкрзЛрж╕рзНржЯ ржХрзЛржб", type: "text", required: true, placeholder: "ржкрзЛрж╕рзНржЯ ржХрзЛржб рж▓рж┐ржЦрзБржи" },
            { name: "current_address", label: "ржарж┐ржХрж╛ржирж╛", type: "text", required: true, placeholder: "ржарж┐ржХрж╛ржирж╛ рж▓рж┐ржЦрзБржи" },
        ],
    },
    {
        title: "рзн. ржЕржирзНржпрж╛ржирзНржп рждржерзНржп",
        subtitle: "Other Information",
        prefix: "other_info",
        fields: [
            { name: "inbound_count", label: "ржЗржиржмрж╛ржЙржирзНржб рж╕ржВржЦрзНржпрж╛ржГ", type: "number", required: true },
            { name: "outbound_count", label: "ржЖржЙржЯржмрж╛ржЙржирзНржб рж╕ржВржЦрзНржпрж╛ржГ", type: "number", required: true },
            { name: "domestic_count", label: "ржбрзЛржорзЗрж╕рзНржЯрж┐ржХ рж╕ржВржЦрзНржпрж╛ржГ", type: "number", required: true },
            { name: "certificate_number", label: "рж╕рж╛рж░рзНржЯрж┐ржлрж┐ржХрзЗржЯ ржиржорзНржмрж░", type: "text", required: true, placeholder: "рж╕рж╛рж░рзНржЯрж┐ржлрж┐ржХрзЗржЯ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи" },
            { name: "issue_date", label: "ржЬрж╛рж░рж┐ рждрж╛рж░рж┐ржЦ", type: "date", required: true },
            { name: "fiscal_year", label: "ржЖрж░рзНржерж┐ржХ ржмржЫрж░", type: "text", required: true, placeholder: "ржЖрж░рзНржерж┐ржХ ржмржЫрж░ рж▓рж┐ржЦрзБржи" },
            { name: "tax_issue_date", label: "ржЯрзНржпрж╛ржХрзНрж╕ ржЬрж╛рж░рж┐ рждрж╛рж░рж┐ржЦ", type: "date", required: true },
            { name: "tax_fiscal_year", label: "ржЯрзНржпрж╛ржХрзНрж╕ ржЖрж░рзНржерж┐ржХ ржмржЫрж░", type: "text", required: true, placeholder: "ржЯрзНржпрж╛ржХрзНрж╕ ржЖрж░рзНржерж┐ржХ ржмржЫрж░ рж▓рж┐ржЦрзБржи" },
            { name: "e_tin", label: "ржЗ-ржЯрж┐ржи", type: "text", required: true, placeholder: "ржЗ-ржЯрж┐ржи рж▓рж┐ржЦрзБржи" },
        ],
    },
];

// тЬЕ Step 1 Component
const Step1 = ({ formData, setFormData }) => {
    // Function to handle change of form fields
    const handleChange = (prefix, name, value) => {
        setFormData((prev) => ({
            ...prev,
            step1: {
                ...(prev.step1 || {}),
                [prefix]: {
                    ...(prev.step1?.[prefix] || {}),
                    [name]: value,
                },
            },
        }));
    };

    return (
        <Container maxW="6xl" py={10}>
            {formSections.map((section, idx) => (
                <Section key={idx} title={section.title} subtitle={section.subtitle}>
                    <SimpleGrid columns={{ base: 1, md: 2 }} spacing={6}>
                        {section.fields.map((field, fieldIdx) => {
                            const value = formData?.step1?.[section.prefix]?.[field.name] || "";

                            return (
                                <FormControl key={fieldIdx} isRequired={field.required}>
                                    <FormLabel>{field.label}</FormLabel>
                                    {field.type === "select" ? (
                                        <ModernSelect
                                            name={field.name}
                                            placeholder="ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи"
                                            value={value}
                                            onChange={(e) =>
                                                handleChange(section.prefix, field.name, e.target.value)
                                            }
                                        >
                                            {field.options.map((opt, optIdx) => (
                                                <option key={optIdx} value={opt}>
                                                    {opt}
                                                </option>
                                            ))}
                                        </ModernSelect>
                                    ) : (
                                        <ModernInput
                                            type={field.type}
                                            name={field.name}
                                            placeholder={field.placeholder}
                                            value={value}
                                            onChange={(e) =>
                                                handleChange(section.prefix, field.name, e.target.value)
                                            }
                                        />
                                    )}
                                </FormControl>
                            );
                        })}
                    </SimpleGrid>
                </Section>
            ))}
        </Container>
    );
};

export default Step1;
